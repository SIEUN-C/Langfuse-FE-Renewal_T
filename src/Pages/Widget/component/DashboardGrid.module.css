/* src/Pages/Widget/component/DashboardGrid.module.css */

/* =========================
   Grid Container
   ========================= */
   .gridContainer {
    width: 100%;
    flex-grow: 1;
  }
  
  .gridLayout {
    width: 100%;
  }
  
  /* =========================
     Grid Items - 핵심 수정
     ========================= */
  .gridItem {
    /* 기본 크기 제한 */
    max-height: 100%;
    max-width: 100%;
    
    /* 핵심: 크기 강제 적용 */
    height: 100% !important;
    width: 100% !important;
    
    /* overflow 제어 - 내부 컨텐츠가 넘치지 않도록 */
    overflow: hidden !important;
    
    /* 박스 모델 */
    box-sizing: border-box !important;
    
    /* 배경과 테두리 */
    background: var(--color-background, #ffffff);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 8px;
    
    /* 내부 컨텐츠 정렬 */
    display: flex;
    flex-direction: column;
  }
  
  /* =========================
     위젯 내부 컨텐츠 크기 제한 - 새로 추가
     ========================= */
  
  /* 모든 위젯 내부 요소 크기 제한 */
  .gridItem > * {
    max-width: 100% !important;
    max-height: 100% !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
  }
  
  /* 차트 라이브러리별 크기 제한 */
  .gridItem :global(.widget-content),
  .gridItem :global(.chart-container),
  .gridItem :global(.recharts-wrapper),
  .gridItem :global(.recharts-responsive-container) {
    max-width: 100% !important;
    max-height: 100% !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
  }
  
  /* Chart.js 차트 크기 제한 */
  .gridItem :global(.chartjs-wrapper),
  .gridItem :global(.chartjs-container) {
    max-width: 100% !important;
    max-height: 100% !important;
    overflow: hidden !important;
  }
  
  /* 피봇 테이블 크기 제한 */
  .gridItem :global(.pivot-table-container),
  .gridItem :global(.table-container) {
    max-width: 100% !important;
    max-height: 100% !important;
    overflow: auto !important;
  }
  
  /* 큰 숫자 위젯 크기 제한 */
  .gridItem :global(.big-number-container),
  .gridItem :global(.number-widget) {
    width: 100% !important;
    height: 100% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    overflow: hidden !important;
  }
  
  /* SVG 차트 크기 제한 */
  .gridItem :global(svg) {
    max-width: 100% !important;
    max-height: 100% !important;
  }
  
  /* Canvas 요소 크기 제한 */
  .gridItem :global(canvas) {
    max-width: 100% !important;
    max-height: 100% !important;
  }
  
  /* =========================
     Mobile Layout (Small Screens)
     ========================= */
  .smallScreenContainer {
    display: flex;
    width: 100%;
    flex-direction: column;
    gap: 16px;
  }
  
  .smallScreenWidget {
    width: 100%;
    height: 300px; /* Fixed height for mobile */
    overflow: hidden;
    background: var(--color-background, #ffffff);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 8px;
  }
  
  /* =========================
     React Grid Layout Overrides
     ========================= */
  
  /* Grid item 기본 스타일 */
  :global(.react-grid-layout) {
    position: relative;
  }
  
  :global(.react-grid-item) {
    transition: all 200ms ease;
    transition-property: left, top;
    border-radius: 8px;
    /* 핵심: 크기 강제 적용 */
    box-sizing: border-box !important;
    overflow: hidden !important;
  }
  
  :global(.react-grid-item.cssTransforms) {
    transition-property: transform;
  }
  
  :global(.react-grid-item > .react-resizable-handle) {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 0;
    right: 0;
    background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSI2IiB2aWV3Qm94PSIwIDAgNiA2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZG90cyBmaWxsPSIjOTk5IiBvcGFjaXR5PSIwLjgiPgo8Y2lyY2xlIGN4PSIxIiBjeT0iMSIgcj0iMSIvPgo8Y2lyY2xlIGN4PSIxIiBjeT0iMyIgcj0iMSIvPgo8Y2lyY2xlIGN4PSIxIiBjeT0iNSIgcj0iMSIvPgo8Y2lyY2xlIGN4PSIzIiBjeT0iMyIgcj0iMSIvPgo8Y2lyY2xlIGN4PSIzIiBjeT0iNSIgcj0iMSIvPgo8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMSIvPgo8L2RvdHM+Cjwvc3ZnPgo=');
    background-position: bottom right;
    padding: 0 3px 3px 0;
    background-repeat: no-repeat;
    background-origin: content-box;
    box-sizing: border-box;
    cursor: se-resize;
    opacity: 0.4;
    transition: opacity 0.2s;
  }
  
  :global(.react-grid-item:hover > .react-resizable-handle) {
    opacity: 0.8;
  }
  
  /* 드래그 중일 때 */
  :global(.react-grid-item.react-draggable-dragging) {
    transition: none;
    z-index: 3;
    opacity: 0.8;
  }
  
  :global(.react-grid-item.react-grid-placeholder) {
    background: rgba(59, 130, 246, 0.15);
    border: 2px dashed #3b82f6;
    opacity: 0.2;
    transition-duration: 100ms;
    z-index: 2;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
  }
  
  /* =========================
     Drag Handle Styles
     ========================= */
  :global(.drag-handle) {
    cursor: move;
    background-color: rgba(100, 116, 139, 0.1);
    border-radius: 4px;
    padding: 8px;
    margin: -4px;
    transition: background-color 0.2s;
  }
  
  :global(.drag-handle:hover) {
    background-color: rgba(100, 116, 139, 0.2);
  }
  
  /* 편집 불가능할 때 drag handle 숨기기 */
  :global(.no-edit .drag-handle) {
    display: none;
  }
  
  /* =========================
     반응형 디자인
     ========================= */
  @media (max-width: 1024px) {
    .gridContainer {
      display: none; /* 모바일에서는 grid 숨김 */
    }
    
    .smallScreenContainer {
      display: flex; /* 모바일에서는 flex 사용 */
    }
  }
  
  @media (min-width: 1025px) {
    .smallScreenContainer {
      display: none; /* 데스크톱에서는 mobile 숨김 */
    }
    
    .gridContainer {
      display: block; /* 데스크톱에서는 grid 사용 */
    }
  }
  
  @media (max-width: 768px) {
    .smallScreenWidget {
      height: 250px; /* 모바일에서는 더 작게 */
    }
    
    .smallScreenContainer {
      gap: 12px; /* 간격 줄임 */
    }
  }
  
  /* =========================
     CSS 변수 정의
     ========================= */
  :root {
    --color-background: #ffffff;
    --color-border: #e2e8f0;
    --color-primary: #3b82f6;
  }
  
  /* 다크 모드 */
  @media (prefers-color-scheme: dark) {
    :root {
      --color-background: #0f172a;
      --color-border: #334155;
      --color-primary: #60a5fa;
    }
  }